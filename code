import pandas as pd
import matplotlib.pyplot as plt
from statsmodels.tsa.arima.model import ARIMA
from statsmodels.tsa.stattools import adfuller

# Load dataset
df = pd.read_csv("cleaned_sales_data.csv", parse_dates=['Order Date'])
df = df.groupby('Order Date')['Sales'].sum().asfreq('M')

# Check stationarity
result = adfuller(df)
print(f'ADF Statistic: {result[0]}, p-value: {result[1]}')

# Fit ARIMA model
model = ARIMA(df, order=(1,1,1))  # Example order
model_fit = model.fit()

# Forecast next 4 periods
forecast = model_fit.forecast(steps=4)
print(forecast)

# Plot
plt.figure(figsize=(10,5))
plt.plot(df, label='Historical Sales')
plt.plot(forecast, label='Forecast', color='red')
plt.title('Sales Forecast')
plt.legend()
plt.show()
